<link rel="import" href="src/galaxy.html">

<template>
  <style>
    :host .tomato {
      background: tomato;
    }
  </style>

  <h1>{{ title }}</h1>
  <h2>Plain element</h2>
  <pre><code>Todos: {{ wellPrintTodos }}</code></pre>

  <h3 g-if="showMessage">Hello World</h3>

  <input g-ref="todoInput" type="text" @input="onTodo($event)">
  <button :id="'Todos: ' + wellPrintTodos" type="button" @click="addTodo($refs.todoInput)">Add</button>
  <input type="text" g-bind="title">

  <button @click="toggleMessage()">Toggle message</button>
</template>

<script>
  class TodoApp extends Galaxy.Element {
    constructor () {
      super()

      this.state = {
        title: 'Custom title',

        showMessage: false,

        todo: {
          name: '',
          done: false
        },

        todos: [
          {
            name: 'Default todo 1',
            done: true
          },
          {
            name: 'Default todo 2',
            done: false
          }
        ],

        // Computed property
        get wellPrintTodos() {
          return JSON.stringify(this.todos, null, 2)
        }
      }
    }

    static get is () {
      return 'todo-app'
    }

    addTodo ({ todos, todo }, todoInput) {
      todos.push(Object.assign({}, todo))

      // Reset todo name
      todoInput.value = todo.name = ''
    }

    onTodo ({ todo }, { target }) {
      todo.name = target.value
    }

    toggleMessage (state) {
      state.showMessage = !state.showMessage
    }
  }

  Galaxy.register(TodoApp)
</script>
